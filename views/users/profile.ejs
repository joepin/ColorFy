<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Profile</title>
    <%- include('../snippets/common') %>
  </head>
  <body>

  <%- include('../snippets/header') %>

    <h1>Welcome <%= user %>!</h1>
    <div class='flex-container upper-container'>
      <div class='user-info-container'>
        <p>Username: <%= dbUser.username %></p>
        <p>Email: <%= dbUser.email %></p>
        <br>
        <h4>Update Account Info</h4>
        <form action='/users/update?_method=PUT' method='POST' id='user-form' class='flex-container'>
          <label for='username'>Username:</label>
          <input type='text' name='username' value='<%= dbUser.username %>' placeholder='username' class='update-credential'>
          <label for='Email'>Email:</label>
          <input type='text' name='email' value='<%= dbUser.email %>' placeholder='email' class='update-credential'>
          <label for='Password'>Password:</label>
          <input type='password' name='password' value='' placeholder='password' class='update-credential'>
          <input type='hidden' name='id' value='<%= dbUser._id %>'>
          <button type='submit'>Update</button>
        </form>
      </div>
    </div>
    <div class='main-container'>
      <% favorites.forEach((el) => { %>
        <div class='show-container' style="background:rgb(<%= el.colors.red %>, <%= el.colors.green %>, <%= el.colors.blue %>)"></div>
        <div><%= el.timestamp %></div>
        <div><%= el.requestText %></div>
        <form action='users/favorites?_method=DELETE' method='POST'>
          <input type='hidden' name='id' value='<%= el._id %>'>
          <button type='submit'>Remove from favorites</button>
        </form>
      <% }) %>
    </div>
  </body>
</html>
